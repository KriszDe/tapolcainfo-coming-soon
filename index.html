<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Admin • Statisztika</title>
  <style>
    body { font-family: system-ui; background: #f6f6f6; margin: 0; padding: 20px; }
    h1 { text-align: center; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap: 16px; max-width: 900px; margin: 0 auto; }
    .card { background: #fff; padding: 16px; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,.1); }
    .label { font-weight: bold; margin-bottom: 6px; }
    .value { font-size: 1.2em; }
  </style>
</head>
<body>
  <h1>Szerver statisztika</h1>
  <div class="grid" id="cards"></div>

  <script>
    async function load(){
      const r = await fetch('/metrics'); // a szervered adja ezt az endpointot
      const d = await r.json();
      const fmt = b => (b/1024/1024/1024).toFixed(1)+' GB';
      const cards = [
        ['Host', d.hostname],
        ['Uptime', (d.uptimeSeconds/3600).toFixed(1)+' h'],
        ['CPU load', d.cpuLoad['1m']+' / '+d.cpuLoad['5m']+' / '+d.cpuLoad['15m']],
        ['Memória', fmt(d.memory.used)+' / '+fmt(d.memory.total)],
        ['Lemez', d.disk.usedPct]
      ];
      document.getElementById('cards').innerHTML = cards.map(([h,v]) =>
        `<div class="card"><div class="label">${h}</div><div class="value">${v}</div></div>`
      ).join('');
    }
    load(); setInterval(load, 5000);
  </script>
</body>
</html>
