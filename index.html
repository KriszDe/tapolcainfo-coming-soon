<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <title>Gyors GPS teszt</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>html,body,#map{height:100%;margin:0}</style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([46.8443,16.6080],14);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);

    let marker=null,path=L.polyline([], {color:'blue'}).addTo(map);
    function update(lat,lon,acc){
      const ll=[lat,lon];
      if(!marker){ marker=L.marker(ll).addTo(map); map.setView(ll,16);}
      else marker.setLatLng(ll);
      path.addLatLng(ll);
    }

    if(navigator.geolocation){
      navigator.geolocation.watchPosition(p=>{
        update(p.coords.latitude, p.coords.longitude, p.coords.accuracy);
      },err=>{
        alert("Hiba: "+err.message);
      },{enableHighAccuracy:true});
    }else alert("Nincs GPS támogatás.");
  </script>
</body>
</html>
